"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[1600],{3905:function(e,n,t){t.d(n,{Zo:function(){return d},kt:function(){return k}});var r=t(7294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var s=r.createContext({}),c=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},d=function(e){var n=c(e.components);return r.createElement(s.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},u=r.forwardRef((function(e,n){var t=e.components,i=e.mdxType,a=e.originalType,s=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),u=c(t),k=i,m=u["".concat(s,".").concat(k)]||u[k]||p[k]||a;return t?r.createElement(m,l(l({ref:n},d),{},{components:t})):r.createElement(m,l({ref:n},d))}));function k(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var a=t.length,l=new Array(a);l[0]=u;var o={};for(var s in n)hasOwnProperty.call(n,s)&&(o[s]=n[s]);o.originalType=e,o.mdxType="string"==typeof e?e:i,l[1]=o;for(var c=2;c<a;c++)l[c]=t[c];return r.createElement.apply(null,l)}return r.createElement.apply(null,t)}u.displayName="MDXCreateElement"},5580:function(e,n,t){t.r(n),t.d(n,{assets:function(){return d},contentTitle:function(){return s},default:function(){return k},frontMatter:function(){return o},metadata:function(){return c},toc:function(){return p}});var r=t(7462),i=t(3366),a=(t(7294),t(3905)),l=["components"],o={sidebar_position:8,id:"doris",title:"Doris"},s=void 0,c={unversionedId:"extend/practice_guide/doris",id:"version-0.6/extend/practice_guide/doris",title:"Doris",description:"\u80cc\u666f",source:"@site/versioned_docs/version-0.6/extend/practice_guide/doris.md",sourceDirName:"extend/practice_guide",slug:"/extend/practice_guide/doris",permalink:"/docs/extend/practice_guide/doris",editUrl:"https://github.com/DataLinkDC/dinky-website/tree/master/versioned_docs/version-0.6/extend/practice_guide/doris.md",tags:[],version:"0.6",sidebarPosition:8,frontMatter:{sidebar_position:8,id:"doris",title:"Doris"},sidebar:"version-0.6/tutorialSidebar",previous:{title:"Clickhouse",permalink:"/docs/extend/practice_guide/clickhouse"},next:{title:"Hudi",permalink:"/docs/extend/practice_guide/hudi"}},d={},p=[{value:"\u80cc\u666f",id:"\u80cc\u666f",level:2},{value:"\u51c6\u5907",id:"\u51c6\u5907",level:2},{value:"\u90e8\u7f72",id:"\u90e8\u7f72",level:2},{value:"\u6570\u636e\u8868",id:"\u6570\u636e\u8868",level:2},{value:"\u5b66\u751f\u8868 \uff08student\uff09",id:"\u5b66\u751f\u8868-student",level:3},{value:"\u6210\u7ee9\u8868\uff08score\uff09",id:"\u6210\u7ee9\u8868score",level:3},{value:"\u5b66\u751f\u6210\u7ee9\u5bbd\u8868\uff08scoreinfo\uff09",id:"\u5b66\u751f\u6210\u7ee9\u5bbd\u8868scoreinfo",level:3},{value:"FlinkSQL",id:"flinksql",level:2},{value:"\u8c03\u8bd5",id:"\u8c03\u8bd5",level:2},{value:"\u5728 Dinky \u4e2d\u63d0\u4ea4",id:"\u5728-dinky-\u4e2d\u63d0\u4ea4",level:3},{value:"FlinkWebUI",id:"flinkwebui",level:3},{value:"Doris \u67e5\u8be2",id:"doris-\u67e5\u8be2",level:3},{value:"\u589e\u91cf\u6d4b\u8bd5",id:"\u589e\u91cf\u6d4b\u8bd5",level:3},{value:"\u53d8\u52a8\u6d4b\u8bd5",id:"\u53d8\u52a8\u6d4b\u8bd5",level:3}],u={toc:p};function k(e){var n=e.components,t=(0,i.Z)(e,l);return(0,a.kt)("wrapper",(0,r.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"\u80cc\u666f"},"\u80cc\u666f"),(0,a.kt)("p",null,"Apache Doris\u662f\u4e00\u4e2a\u73b0\u4ee3\u5316\u7684MPP\u5206\u6790\u578b\u6570\u636e\u5e93\u4ea7\u54c1\u3002\u4ec5\u9700\u4e9a\u79d2\u7ea7\u54cd\u5e94\u65f6\u95f4\u5373\u53ef\u83b7\u5f97\u67e5\u8be2\u7ed3\u679c\uff0c\u6709\u6548\u5730\u652f\u6301\u5b9e\u65f6\u6570\u636e\u5206\u6790\u3002\u4f8b\u5982\u56fa\u5b9a\u5386\u53f2\u62a5\u8868\uff0c\u5b9e\u65f6\u6570\u636e\u5206\u6790\uff0c\u4ea4\u4e92\u5f0f\u6570\u636e\u5206\u6790\u548c\u63a2\u7d22\u5f0f\u6570\u636e\u5206\u6790\u7b49\u3002"),(0,a.kt)("p",null,"\u76ee\u524d Doris \u7684\u751f\u6001\u6b63\u5728\u5efa\u8bbe\u4e2d\uff0c\u672c\u6587\u5c06\u5206\u4eab\u5982\u4f55\u57fa\u4e8e Dlink \u5b9e\u73b0 Mysql \u53d8\u52a8\u6570\u636e\u901a\u8fc7 Flink \u5b9e\u65f6\u5165\u5e93 Doris\u3002"),(0,a.kt)("h2",{id:"\u51c6\u5907"},"\u51c6\u5907"),(0,a.kt)("p",null,"\u8001\u89c4\u77e9\uff0c\u5217\u6e05\u5404\u7ec4\u4ef6\u7248\u672c\uff1a"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"center"},"\u7ec4\u4ef6"),(0,a.kt)("th",{parentName:"tr",align:"center"},"\u7248\u672c"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"center"},"Flink"),(0,a.kt)("td",{parentName:"tr",align:"center"},"1.13.3")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"center"},"Flink-mysql-cdc"),(0,a.kt)("td",{parentName:"tr",align:"center"},"2.1.0")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"center"},"Doris"),(0,a.kt)("td",{parentName:"tr",align:"center"},"0.15.1-rc09")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"center"},"doris-flink"),(0,a.kt)("td",{parentName:"tr",align:"center"},"1.0-SNAPSHOT")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"center"},"Mysql"),(0,a.kt)("td",{parentName:"tr",align:"center"},"8.0.13")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"center"},"Dlink"),(0,a.kt)("td",{parentName:"tr",align:"center"},"0.4.0")))),(0,a.kt)("p",null,"\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u672c\u6587\u7684 Doris \u662f\u57fa\u4e8e OracleJDK1.8 \u548c Scala 2.11 \u901a\u8fc7\u6e90\u7801\u8fdb\u884c\u7f16\u8bd1\u6253\u5305\u7684\uff0c\u6240\u4ee5\u6240\u6709\u7ec4\u4ef6\u7684 scala \u5747\u4e3a 2.11\uff0c\u6b64\u5904\u548c Doris \u793e\u533a\u7565\u6709\u4e0d\u540c\u3002"),(0,a.kt)("h2",{id:"\u90e8\u7f72"},"\u90e8\u7f72"),(0,a.kt)("p",null,"\u672c\u6587\u7684 Flink \u548c Doris \u7684\u90e8\u7f72\u4e0d\u505a\u63cf\u8ff0\uff0c\u8be6\u60c5\u8bf7\u67e5\u9605\u5b98\u7f51\u3002"),(0,a.kt)("p",null,"\u672c\u6587\u5728 Dlink \u90e8\u7f72\u6210\u529f\u7684\u57fa\u7840\u4e0a\u8fdb\u884c\uff0c\u5982\u9700\u67e5\u770b\u5177\u4f53\u90e8\u7f72\u6b65\u9aa4\uff0c\u8bf7\u9605\u8bfb\u300aflink sql \u77e5\u5176\u6240\u4ee5\u7136\uff08\u5341\u516d\uff09\uff1aflink sql \u5f00\u53d1\u4f01\u4e1a\u7ea7\u5229\u5668\u4e4b Dlink\u300b\u3002"),(0,a.kt)("p",null,"Dlink \u7684 plugins \u4e0b\u6dfb\u52a0 ",(0,a.kt)("inlineCode",{parentName:"p"},"doris-flink-1.0-SNAPSHOT.jar")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"flink-sql-connector-mysql-cdc-2.1.0.jar")," \u3002\u91cd\u542f Dlink\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"plugins/ -- Flink \u76f8\u5173\u6269\u5c55\n|- doris-flink-1.0-SNAPSHOT.jar\n|- flink-csv-1.13.3.jar\n|- flink-dist_2.11-1.13.3.jar\n|- flink-format-changelog-json-2.1.0.jar\n|- flink-json-1.13.3.jar\n|- flink-shaded-zookeeper-3.4.14.jar\n|- flink-sql-connector-mysql-cdc-2.1.0.jar\n|- flink-table_2.11-1.13.3.jar\n|- flink-table-blink_2.11-1.13.3.jar\n")),(0,a.kt)("p",null,"\u5f53\u7136\uff0c\u5982\u679c\u60a8\u60f3\u76f4\u63a5\u4f7f\u7528 FLINK_HOME \u7684\u8bdd\uff0c\u53ef\u4ee5\u5728 ",(0,a.kt)("inlineCode",{parentName:"p"},"auto.sh")," \u6587\u4ef6\u4e2d ",(0,a.kt)("inlineCode",{parentName:"p"},"SETTING")," \u53d8\u91cf\u6dfb\u52a0",(0,a.kt)("inlineCode",{parentName:"p"},"$FLINK_HOME/lib")," \u3002"),(0,a.kt)("h2",{id:"\u6570\u636e\u8868"},"\u6570\u636e\u8868"),(0,a.kt)("h3",{id:"\u5b66\u751f\u8868-student"},"\u5b66\u751f\u8868 \uff08student\uff09"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"-- Mysql\nDROP TABLE IF EXISTS `student`;\nCREATE TABLE `student`  (\n  `sid` int(11) NOT NULL,\n  `name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,\n  PRIMARY KEY (`sid`) USING BTREE\n) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;\n\nINSERT INTO `student` VALUES (1, '\u5c0f\u7ea2');\nINSERT INTO `student` VALUES (2, '\u5c0f\u9ed1');\nINSERT INTO `student` VALUES (3, '\u5c0f\u9ec4');\n")),(0,a.kt)("h3",{id:"\u6210\u7ee9\u8868score"},"\u6210\u7ee9\u8868\uff08score\uff09"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"-- Mysql\nDROP TABLE IF EXISTS `score`;\nCREATE TABLE `score`  (\n  `cid` int(11) NOT NULL,\n  `sid` int(11) NULL DEFAULT NULL,\n  `cls` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,\n  `score` int(11) NULL DEFAULT NULL,\n  PRIMARY KEY (`cid`) USING BTREE\n) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;\n\nINSERT INTO `score` VALUES (1, 1, 'chinese', 90);\nINSERT INTO `score` VALUES (2, 1, 'math', 95);\nINSERT INTO `score` VALUES (3, 1, 'english', 93);\nINSERT INTO `score` VALUES (4, 2, 'chinese', 92);\nINSERT INTO `score` VALUES (5, 2, 'math', 75);\nINSERT INTO `score` VALUES (6, 2, 'english', 80);\nINSERT INTO `score` VALUES (7, 3, 'chinese', 100);\nINSERT INTO `score` VALUES (8, 3, 'math', 60);\n")),(0,a.kt)("h3",{id:"\u5b66\u751f\u6210\u7ee9\u5bbd\u8868scoreinfo"},"\u5b66\u751f\u6210\u7ee9\u5bbd\u8868\uff08scoreinfo\uff09"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},'-- Doris\nCREATE TABLE scoreinfo\n(\n    cid INT,\n    sid INT,\n    name VARCHAR(32),\n    cls VARCHAR(32),\n    score INT\n)\nUNIQUE KEY(cid)\nDISTRIBUTED BY HASH(cid) BUCKETS 10\nPROPERTIES("replication_num" = "1");\n')),(0,a.kt)("h2",{id:"flinksql"},"FlinkSQL"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE student (\n    sid INT,\n    name STRING,\n    PRIMARY KEY (sid) NOT ENFORCED\n) WITH (\n'connector' = 'mysql-cdc',\n'hostname' = '127.0.0.1',\n'port' = '3306',\n'username' = 'test',\n'password' = '123456',\n'database-name' = 'test',\n'table-name' = 'student');\nCREATE TABLE score (\n    cid INT,\n    sid INT,\n    cls STRING,\n    score INT,\n    PRIMARY KEY (cid) NOT ENFORCED\n) WITH (\n'connector' = 'mysql-cdc',\n'hostname' = '127.0.0.1',\n'port' = '3306',\n'username' = 'test',\n'password' = '123456',\n'database-name' = 'test',\n'table-name' = 'score');\nCREATE TABLE scoreinfo (\n    cid INT,\n    sid INT,\n    name STRING,\n    cls STRING,\n    score INT,\n    PRIMARY KEY (cid) NOT ENFORCED\n) WITH (       \n'connector' = 'doris',\n'fenodes' = '127.0.0.1:8030' ,\n'table.identifier' = 'test.scoreinfo',\n'username' = 'root',\n'password'=''\n);\ninsert into scoreinfo\nselect \na.cid,a.sid,b.name,a.cls,a.score\nfrom score a\nleft join student b on a.sid = b.sid\n")),(0,a.kt)("h2",{id:"\u8c03\u8bd5"},"\u8c03\u8bd5"),(0,a.kt)("h3",{id:"\u5728-dinky-\u4e2d\u63d0\u4ea4"},"\u5728 Dinky \u4e2d\u63d0\u4ea4"),(0,a.kt)("p",null,"\u672c\u793a\u4f8b\u91c7\u7528\u4e86 yarn-session \u7684\u65b9\u5f0f\u8fdb\u884c\u63d0\u4ea4\u3002\n",(0,a.kt)("a",{parentName:"p",href:"http://www.aiwenmo.com/dinky/docs/zh-CN/extend/practice_guide"},"http://www.aiwenmo.com/dinky/docs/zh-CN/extend/practice_guide"),"\n",(0,a.kt)("img",{parentName:"p",src:"http://www.aiwenmo.com/dinky/docs/zh-CN/extend/practice_guide/doris/dinky_submit.png",alt:"dinky_submit"})),(0,a.kt)("h3",{id:"flinkwebui"},"FlinkWebUI"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"http://www.aiwenmo.com/dinky/docs/zh-CN/extend/practice_guide/doris/flink_webui.png",alt:"flink_webui"})),(0,a.kt)("p",null,"\u4e0a\u56fe\u53ef\u89c1\uff0c\u6d41\u4efb\u52a1\u5df2\u7ecf\u6210\u529f\u88ab Dinky \u63d0\u4ea4\u7684\u8fdc\u7a0b\u96c6\u7fa4\u4e86\u3002"),(0,a.kt)("h3",{id:"doris-\u67e5\u8be2"},"Doris \u67e5\u8be2"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"http://www.aiwenmo.com/dinky/docs/zh-CN/extend/practice_guide/doris/doris_query.png",alt:"doris_query"})),(0,a.kt)("p",null,"\u4e0a\u56fe\u53ef\u89c1\uff0cDoris \u5df2\u7ecf\u88ab\u5199\u5165\u4e86\u5386\u53f2\u5168\u91cf\u6570\u636e\u3002"),(0,a.kt)("h3",{id:"\u589e\u91cf\u6d4b\u8bd5"},"\u589e\u91cf\u6d4b\u8bd5"),(0,a.kt)("p",null,"\u5728 Mysql \u4e2d\u6267\u884c\u65b0\u589e\u8bed\u53e5\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"INSERT INTO `score` VALUES (9, 3, 'english', 100);\n")),(0,a.kt)("p",null,"Doris \u6210\u529f\u88ab\u8ffd\u52a0\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"http://www.aiwenmo.com/dinky/docs/zh-CN/extend/practice_guide/doris/doris_show_data_change.png",alt:"doris_show_data_change"})),(0,a.kt)("h3",{id:"\u53d8\u52a8\u6d4b\u8bd5"},"\u53d8\u52a8\u6d4b\u8bd5"),(0,a.kt)("p",null,"\u5728 Mysql \u4e2d\u6267\u884c\u65b0\u589e\u8bed\u53e5\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"update score set score = 100 where cid = 1\n")),(0,a.kt)("p",null,"Doris \u6210\u529f\u88ab\u4fee\u6539\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"http://www.aiwenmo.com/dinky/docs/zh-CN/extend/practice_guide/doris/doris_show_data_change_again.png",alt:"doris_show_data_change_again"})))}k.isMDXComponent=!0}}]);